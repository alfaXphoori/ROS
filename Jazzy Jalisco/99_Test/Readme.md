# ЁЯЪА р╕Вр╣Йр╕нр╕кр╕нр╕Ър╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕гр╕▓р╕вр╕зр╕┤р╕Кр╕▓р╕зр╕┤р╕ир╕зр╕Бр╕гр╕гр╕бр╕лр╕╕р╣Ир╕Щр╕вр╕Щр╕Хр╣Мр╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щ ЁЯдЦ

## ЁЯУМ р╕Др╕│р╕Кр╕╡р╣Йр╣Бр╕Ир╕З

- тЬЕ р╣Гр╕лр╣Йр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╣Ар╕Вр╕╡р╕вр╕Щр╣Вр╕Др╣Йр╕Фр╣Бр╕ер╕░р╕Чр╕Фр╕кр╕нр╕Ър╕Хр╕▓р╕бр╕лр╕▒р╕зр╕Вр╣Йр╕нр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф
- ЁЯТ╗ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╕ар╕▓р╕йр╕▓ **Python р╕лр╕гр╕╖р╕н C++** р╣Др╕Фр╣Йр╕Хр╕▓р╕бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
- ЁЯУЬ р╣Гр╕лр╣Йр╣Бр╕Щр╕Ъ **р╣Вр╕Др╣Йр╕Фр╕Чр╕╡р╣Ир╣Ар╕Вр╕╡р╕вр╕Щр╣Бр╕ер╕░р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╣Др╕Фр╣Й** р╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

---

## ЁЯЯв 1. Publisher Node & Message

### ЁЯУЭ 1.1 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╣Бр╕Бр╣Йр╣Др╕В Message

ЁЯУМ р╣Ар╕Юр╕┤р╣Ир╕бр╕Хр╕▒р╕зр╣Бр╕Ыр╕г Message р╣Гр╕Щ **HardwareStatus.msg** р╕Фр╕▒р╕Зр╕Хр╣Ир╕нр╣Др╕Ыр╕Щр╕╡р╣Й  

```plaintext
string std_name
string std_surname
string std_class
int64 std_number
```

### ЁЯПЧ 1.2 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Publisher Node

ЁЯЦе р╣Гр╕лр╣Йр╣Ар╕Вр╕╡р╕вр╕Щ Publisher Node р╕Чр╕╡р╣Ир╕Чр╕│р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И **р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е HardwareStatus.msg** р╕нр╕нр╕Бр╕Чр╕▓р╕З Topic  
ЁЯУМ р╕Бр╕│р╕лр╕Щр╕Фр╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Вр╕нр╕Зр╕Хр╕▒р╕зр╣Бр╕Ыр╕гр╕Фр╕▒р╕Зр╕Щр╕╡р╣Й  

```python
std_name = "р╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓"
std_surname = "р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕ер╕Вр╕нр╕Зр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓"
std_class = "р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Вр╕нр╕Зр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓"
std_number = "р╕гр╕лр╕▒р╕кр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓"
```

### тЬЕ 1.3 р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

ЁЯФН р╕Чр╕Фр╕кр╕нр╕Ъ Publisher Node р╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕╢р╣Йр╕Щр╕Фр╣Йр╕зр╕вр╕Др╕│р╕кр╕▒р╣Ир╕З  
*** phoori_std р╕Др╕╖р╕╖р╕н topic

```sh
ros2 topic echo /phoori_std
```
ЁЯУМ р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М  
- ![pub*msg](imgs/msg&pub.png)
---

## ЁЯФ╡ 2. Service (р╕Юр╕╖р╣Йр╕Щр╕Чр╕╡р╣Ир╕зр╕Зр╕Бр╕ер╕б)

### ЁЯУЭ 2.1 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Service Server

ЁЯУВ р╣Гр╕лр╣Йр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М **CircleArea.srv** р╕ар╕▓р╕вр╣Гр╕Щ package р╕Вр╕нр╕Зр╕Хр╕Щр╣Ар╕нр╕З  
ЁЯУМ р╕Бр╕│р╕лр╕Щр╕Фр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕нр╕З Service р╕Фр╕▒р╕Зр╕Щр╕╡р╣Й  

```plaintext
# Request
float64 r
---
# Response
float64 area
```

### ЁЯПЧ 2.2 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Service Server & Client

ЁЯУМ р╣Гр╕лр╣Йр╕кр╕гр╣Йр╕▓р╕З Service Server р╕Чр╕╡р╣Ир╕гр╕▒р╕Ър╕Др╣Ир╕▓р╕гр╕▒р╕ир╕бр╕╡
р╣Бр╕ер╕░р╕Др╕│р╕Щр╕зр╕Ур╕Юр╕╖р╣Йр╕Щр╕Чр╕╡р╣Ир╕Вр╕нр╕Зр╕зр╕Зр╕Бр╕ер╕бр╕Ир╕▓р╕Бр╕кр╕╣р╕Хр╕г  

```
area = ╧А * r^2
```

ЁЯУМ р╣Гр╕лр╣Йр╕кр╣Ир╕Зр╕Др╣Ир╕▓р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕вр╕▒р╕З Client р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Ъ **р╕Кр╕╖р╣Ир╕нр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓**

### тЬЕ 2.3 р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

ЁЯФН р╕Чр╕Фр╕кр╕нр╕Ъ Service Server р╣Вр╕Фр╕вр╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З  

```sh
ros2 run ce_robot 
```
ЁЯУМ р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М  
- ![service](imgs/service.png)
---

## ЁЯЯа 3. Action (Robot Run)

### ЁЯУЭ 3.1 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Action Definition File

ЁЯУВ р╣Гр╕лр╣Йр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М **RobotRun.action** р╕ар╕▓р╕вр╣Гр╕Щ package р╕Вр╕нр╕Зр╕Хр╕Щр╣Ар╕нр╕З  
ЁЯУМ р╕Бр╕│р╕лр╕Щр╕Фр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕нр╕З Action р╕Фр╕▒р╕Зр╕Щр╕╡р╣Й  

```plaintext
# Goal
int64 target_distance
float speed
---
# Result
int64 time
---
# Feedback
int64 current_distance
```

### ЁЯПЧ 3.2 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Action Server

ЁЯУМ р╣Гр╕лр╣Йр╣Ар╕Вр╕╡р╕вр╕Щ Action Server р╕Чр╕╡р╣И  

- р╕гр╕▒р╕Ър╕Др╣Ир╕▓ **target_distance** р╣Бр╕ер╕░ **speed**  
- р╕Др╕│р╕Щр╕зр╕Ур╣Ар╕зр╕ер╕▓р╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕Чр╕╡р╣Ир╕Ир╕▓р╕Бр╕кр╕╣р╕Хр╕г  

  ```
  time = target_distance / speed
  ```

- р╕кр╣Ир╕Зр╕Др╣Ир╕▓р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕вр╕▒р╕З Client  
- р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╣Ир╕▓р╕Вр╕нр╕З **current_distance** р╣Ар╕Ыр╣Зр╕Щр╕гр╕░р╕вр╕░р╕Чр╕╡р╣Ир╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕Чр╕╡р╣Ир╣Др╕Ы  

### ЁЯУб 3.3 р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Action Client

ЁЯУМ р╣Гр╕лр╣Йр╣Ар╕Вр╕╡р╕вр╕Щ Action Client р╕Чр╕╡р╣И  

- р╕кр╣Ир╕Зр╕Др╣Ир╕▓ **target_distance** р╣Бр╕ер╕░ **speed** р╣Др╕Ыр╕вр╕▒р╕З Server  
- р╕гр╕▒р╕Ър╕Др╣Ир╕▓р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Б Server 

### тЬЕ 3.4 р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

ЁЯФН р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕З Action Sever & Action Client р╣Вр╕Фр╕вр╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З  

```sh
ros2 run ce_robot robot_
```
ЁЯУМ р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М  
- ![action](imgs/action.png)
---

## тЬЕ р╕Ир╕Ър╕Вр╣Йр╕нр╕кр╕нр╕Ъ  
